# Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"


###  1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

Для проверки сетевых интерфейсов можем использовать команды:

`ifconfig -a`

`ip a`

`ip -c -br link`

`ls /sys/class/net`

В ходе решения проблем с сетью в linux бывает необходимо посмотреть не только интерфейсы, но и на каком оборудовании они реализованы:

`lshw -c net`

`dmesg | grep eth`

### 2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

Можно использовать протокол LLDP (пакет `lldpd`)

Так же соседей в одном с нами сегменте сети мы можем посмотреть командой `arp -a`. Используется протокол ARP. Пакет в Linux: `iputils-arping`

### 3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

Технология VLAN. Пакет vlan

Пример конфига для Ubuntu 20.04:
````
network:
  ethernets:
    enp1s0:
      dhcp4: false
      addresses:
        - 192.168.122.201/24
      gateway4: 192.168.122.1
      nameservers:
          addresses: [8.8.8.8, 1.1.1.1]

    vlans:
        enp1s0.100:
            id: 100
            link: enp1s0
            addresses: [192.168.100.2/24]
````


### 4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

Агрегация сетевых интерфейсов в Linux называется bonding и реализуется при помощи модуля ядра `bonding` и утилиты `ifenslave`.

Для балансировки можно использовать следующие режимы:
````
mode=0 (round robin) - круговой, циклически использует физические интерфейсы для передачи пакетов

mode=2 (balance-xor) - выбирает для каждого получателя определенный интерфейс в соответствии с mac-адресом.

mode=6 (balance-alb) Адаптивное перераспределение нагрузки
````

Пример конфига:
````
network:
  version: 2
  renderer: networkd
  ethernets:
    enp1s0:
      dhcp4: no
      dhcp6: no
    enp2s0:
      dhcp4: no
      dhcp6: no
  bonds:
    bond0:
      dhcp4: no
      dhcp6: no
      interfaces:
        - enp1s0
        - enp2s0
      macaddress: "xx:xx:xx:xx:2b:62"
      parameters:
        mode: 802.3ad
        lacp-rate: fast
        mii-monitor-interval: 100
        transmit-hash-policy: layer2+3
  bridges:
    br0:
      dhcp4: yes
      dhcp6: yes
      macaddress: "xx:xx:xx:xx:2b:62"
      interfaces:
        - bond0
````
 

### 5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

Сколько IP адресов в сети с маской /29? 

`Можно использовать под хосты - 6, а так - 8.`
 
Сколько /29 подсетей можно получить из сети с маской /24?

```
В сети /24 256 адресов,
в сети /29 8 адресов,
итого можем получить 32 сети.`
```

Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24 :
````
10.10.10.0/29
10.10.10.8/29
...
10.10.10.24/29
...
10.10.10.128/29
...
````


### 6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

Остаётся брать из Carrier-Grade NAT (100.64.0.0/10). Придётся задействовать 64 адреса, сеть `100.64.0.0/26`



### 7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

`arp -a` - проверить ARP таблицу

`sudo ip neigh flush all` - очистить arp таблицу

`arp -d address` - удалить один адрес

